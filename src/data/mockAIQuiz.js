import { normalizeTrackKey } from '../utils/dataUtils';

// Mock AI Quiz data for different tracks
// TODO: In the future, these questions will be generated by AI based on user's track, skill level, and topics analysis

export const aiQuizData = {
  frontend: [
    {
      id: 1,
      question: "How does React's reconciliation algorithm optimize rendering?",
      answers: [
        { id: "a", text: "By comparing Virtual DOM trees and updating only changed elements" },
        { id: "b", text: "By re-rendering the entire page on every state change" },
        { id: "c", text: "By using inline styles for faster updates" },
        { id: "d", text: "By disabling browser caching" }
      ],
      correctAnswer: "a",
      topic: "React Advanced",
      difficulty: "intermediate",
      aiExplanation: "Based on your profile, we want to assess your understanding of React's core optimization mechanisms."
    },
    {
      id: 2,
      question: "What is the primary purpose of useMemo hook?",
      answers: [
        { id: "a", text: "To manage component state" },
        { id: "b", text: "To memoize expensive calculations" },
        { id: "c", text: "To handle side effects" },
        { id: "d", text: "To create refs" }
      ],
      correctAnswer: "b",
      topic: "React Hooks",
      difficulty: "intermediate",
      aiExplanation: "Your topics analysis showed you need practice with advanced hooks patterns."
    },
    {
      id: 3,
      question: "Which CSS property is used to create a flexible container?",
      answers: [
        { id: "a", text: "display: grid" },
        { id: "b", text: "display: flex" },
        { id: "c", text: "display: block" },
        { id: "d", text: "display: inline" }
      ],
      correctAnswer: "b",
      topic: "CSS Flexbox",
      difficulty: "basic",
      aiExplanation: "Testing fundamental CSS layout knowledge essential for frontend development."
    },
    {
      id: 4,
      question: "What does the 'key' prop do in React lists?",
      answers: [
        { id: "a", text: "Helps React identify which items have changed" },
        { id: "b", text: "Provides styling to list items" },
        { id: "c", text: "Encrypts the list data" },
        { id: "d", text: "Sorts the list automatically" }
      ],
      correctAnswer: "a",
      topic: "React Basics",
      difficulty: "basic",
      aiExplanation: "Verifying your understanding of core React concepts."
    },
    {
      id: 5,
      question: "What is the purpose of React.lazy()?",
      answers: [
        { id: "a", text: "To delay component rendering" },
        { id: "b", text: "To implement code splitting and lazy loading" },
        { id: "c", text: "To make components load slower" },
        { id: "d", text: "To create loading spinners" }
      ],
      correctAnswer: "b",
      topic: "Performance Optimization",
      difficulty: "advanced",
      aiExplanation: "Your analysis indicated a gap in performance optimization techniques."
    },
    {
      id: 6,
      question: "What is the purpose of the useCallback hook?",
      answers: [
        { id: "a", text: "To memoize function definitions" },
        { id: "b", text: "To call functions automatically" },
        { id: "c", text: "To create callbacks for events" },
        { id: "d", text: "To handle API callbacks" }
      ],
      correctAnswer: "a",
      topic: "React Hooks",
      difficulty: "intermediate",
      aiExplanation: "Testing advanced React hooks knowledge for performance optimization."
    },
    {
      id: 7,
      question: "What is CSS Grid primarily used for?",
      answers: [
        { id: "a", text: "Creating 2D layouts with rows and columns" },
        { id: "b", text: "Adding animations" },
        { id: "c", text: "Styling text" },
        { id: "d", text: "Managing JavaScript events" }
      ],
      correctAnswer: "a",
      topic: "CSS Grid",
      difficulty: "intermediate",
      aiExplanation: "Assessing your knowledge of modern CSS layout techniques."
    },
    {
      id: 8,
      question: "What is the Context API used for in React?",
      answers: [
        { id: "a", text: "Managing global state without prop drilling" },
        { id: "b", text: "Creating contexts for text" },
        { id: "c", text: "Handling API requests" },
        { id: "d", text: "Managing local component state" }
      ],
      correctAnswer: "a",
      topic: "State Management",
      difficulty: "intermediate",
      aiExplanation: "Your topics analysis showed you need review in state management."
    },
    {
      id: 9,
      question: "What does TypeScript add to JavaScript?",
      answers: [
        { id: "a", text: "Static type checking" },
        { id: "b", text: "Faster execution" },
        { id: "c", text: "Better UI components" },
        { id: "d", text: "Database connectivity" }
      ],
      correctAnswer: "a",
      topic: "TypeScript",
      difficulty: "basic",
      aiExplanation: "Based on your profile, assessing TypeScript fundamentals."
    },
    {
      id: 10,
      question: "What is the purpose of React Testing Library?",
      answers: [
        { id: "a", text: "To test React components from a user's perspective" },
        { id: "b", text: "To create UI components" },
        { id: "c", text: "To optimize performance" },
        { id: "d", text: "To manage state" }
      ],
      correctAnswer: "a",
      topic: "Testing",
      difficulty: "intermediate",
      aiExplanation: "Testing knowledge is crucial for professional development."
    }
  ],
  backend: [
    {
      id: 1,
      question: "What is the purpose of middleware in Express.js?",
      answers: [
        { id: "a", text: "To process requests before they reach route handlers" },
        { id: "b", text: "To style the application" },
        { id: "c", text: "To create database schemas" },
        { id: "d", text: "To compile JavaScript" }
      ],
      correctAnswer: "a",
      topic: "Express.js",
      difficulty: "intermediate",
      aiExplanation: "Based on your profile, testing Express.js middleware concepts."
    },
    {
      id: 2,
      question: "What is an API endpoint?",
      answers: [
        { id: "a", text: "A URL where an API can access resources" },
        { id: "b", text: "The end of a program" },
        { id: "c", text: "A database connection" },
        { id: "d", text: "A frontend component" }
      ],
      correctAnswer: "a",
      topic: "REST API",
      difficulty: "basic",
      aiExplanation: "Verifying fundamental API knowledge."
    },
    {
      id: 3,
      question: "What is JWT primarily used for?",
      answers: [
        { id: "a", text: "Authentication and secure information exchange" },
        { id: "b", text: "Styling web pages" },
        { id: "c", text: "Database queries" },
        { id: "d", text: "File uploads" }
      ],
      correctAnswer: "a",
      topic: "Authentication",
      difficulty: "intermediate",
      aiExplanation: "Your analysis indicated need for authentication concepts review."
    },
    {
      id: 4,
      question: "What does CRUD stand for?",
      answers: [
        { id: "a", text: "Create, Read, Update, Delete" },
        { id: "b", text: "Connect, Run, Update, Deploy" },
        { id: "c", text: "Copy, Render, Upload, Download" },
        { id: "d", text: "Cache, Retrieve, Update, Drop" }
      ],
      correctAnswer: "a",
      topic: "Database Operations",
      difficulty: "basic",
      aiExplanation: "Testing fundamental database operation knowledge."
    },
    {
      id: 5,
      question: "What is MongoDB's primary data format?",
      answers: [
        { id: "a", text: "JSON-like documents (BSON)" },
        { id: "b", text: "XML" },
        { id: "c", text: "CSV" },
        { id: "d", text: "Plain text" }
      ],
      correctAnswer: "a",
      topic: "NoSQL Databases",
      difficulty: "basic",
      aiExplanation: "Assessing NoSQL database fundamentals."
    },
    {
      id: 6,
      question: "What is the purpose of indexing in databases?",
      answers: [
        { id: "a", text: "To speed up data retrieval operations" },
        { id: "b", text: "To delete data faster" },
        { id: "c", text: "To backup data" },
        { id: "d", text: "To encrypt data" }
      ],
      correctAnswer: "a",
      topic: "Database Performance",
      difficulty: "intermediate",
      aiExplanation: "Your profile suggests advanced database optimization knowledge is needed."
    },
    {
      id: 7,
      question: "What is Node.js?",
      answers: [
        { id: "a", text: "A JavaScript runtime built on Chrome's V8 engine" },
        { id: "b", text: "A database system" },
        { id: "c", text: "A CSS framework" },
        { id: "d", text: "A testing library" }
      ],
      correctAnswer: "a",
      topic: "Node.js",
      difficulty: "basic",
      aiExplanation: "Verifying core Node.js understanding."
    },
    {
      id: 8,
      question: "What is the purpose of environment variables?",
      answers: [
        { id: "a", text: "To store configuration and sensitive data outside code" },
        { id: "b", text: "To speed up the application" },
        { id: "c", text: "To create UI components" },
        { id: "d", text: "To test the application" }
      ],
      correctAnswer: "a",
      topic: "Security",
      difficulty: "intermediate",
      aiExplanation: "Testing security best practices knowledge."
    },
    {
      id: 9,
      question: "What is API rate limiting?",
      answers: [
        { id: "a", text: "Controlling the number of requests a client can make" },
        { id: "b", text: "Making APIs faster" },
        { id: "c", text: "Reducing API size" },
        { id: "d", text: "Encrypting API responses" }
      ],
      correctAnswer: "a",
      topic: "API Design",
      difficulty: "intermediate",
      aiExplanation: "Your analysis showed need for API design patterns knowledge."
    },
    {
      id: 10,
      question: "What is GraphQL?",
      answers: [
        { id: "a", text: "A query language for APIs" },
        { id: "b", text: "A graph database" },
        { id: "c", text: "A charting library" },
        { id: "d", text: "A CSS framework" }
      ],
      correctAnswer: "a",
      topic: "GraphQL",
      difficulty: "advanced",
      aiExplanation: "Assessing knowledge of modern API technologies."
    }
  ],
  fullstack: [
    {
      id: 1,
      question: "What is the primary benefit of using Docker?",
      answers: [
        { id: "a", text: "Application containerization and consistent environments" },
        { id: "b", text: "Faster code execution" },
        { id: "c", text: "Better UI design" },
        { id: "d", text: "Automatic code testing" }
      ],
      correctAnswer: "a",
      topic: "DevOps",
      difficulty: "intermediate",
      aiExplanation: "Based on fullstack track, testing containerization knowledge."
    },
    {
      id: 2,
      question: "What does CI/CD stand for?",
      answers: [
        { id: "a", text: "Continuous Integration/Continuous Deployment" },
        { id: "b", text: "Code Implementation/Code Debugging" },
        { id: "c", text: "Client Integration/Client Deployment" },
        { id: "d", text: "Container Installation/Container Distribution" }
      ],
      correctAnswer: "a",
      topic: "DevOps",
      difficulty: "basic",
      aiExplanation: "Testing fundamental DevOps concepts."
    },
    {
      id: 3,
      question: "What is CORS?",
      answers: [
        { id: "a", text: "Cross-Origin Resource Sharing" },
        { id: "b", text: "Central Operating Resource System" },
        { id: "c", text: "Component Object Reference Structure" },
        { id: "d", text: "Cloud Oriented Runtime Service" }
      ],
      correctAnswer: "a",
      topic: "Web Security",
      difficulty: "intermediate",
      aiExplanation: "Your analysis showed need for web security concepts."
    },
    {
      id: 4,
      question: "What is RESTful API design principle?",
      answers: [
        { id: "a", text: "Using standard HTTP methods with stateless communication" },
        { id: "b", text: "Always using POST for all operations" },
        { id: "c", text: "Storing state on the server" },
        { id: "d", text: "Using only GET requests" }
      ],
      correctAnswer: "a",
      topic: "API Design",
      difficulty: "intermediate",
      aiExplanation: "Assessing REST architecture understanding."
    },
    {
      id: 5,
      question: "What is webpack used for?",
      answers: [
        { id: "a", text: "Module bundling and asset optimization" },
        { id: "b", text: "Database management" },
        { id: "c", text: "Server deployment" },
        { id: "d", text: "Testing components" }
      ],
      correctAnswer: "a",
      topic: "Build Tools",
      difficulty: "intermediate",
      aiExplanation: "Testing build tools knowledge for fullstack development."
    },
    {
      id: 6,
      question: "What is OAuth used for?",
      answers: [
        { id: "a", text: "Authorization and delegated access" },
        { id: "b", text: "Data encryption" },
        { id: "c", text: "Database queries" },
        { id: "d", text: "UI styling" }
      ],
      correctAnswer: "a",
      topic: "Authentication",
      difficulty: "advanced",
      aiExplanation: "Your profile suggests advanced authentication patterns needed."
    },
    {
      id: 7,
      question: "What is Redis commonly used for?",
      answers: [
        { id: "a", text: "In-memory data caching" },
        { id: "b", text: "Frontend styling" },
        { id: "c", text: "Email sending" },
        { id: "d", text: "File storage" }
      ],
      correctAnswer: "a",
      topic: "Caching",
      difficulty: "intermediate",
      aiExplanation: "Testing caching strategies knowledge."
    },
    {
      id: 8,
      question: "What is a microservice architecture?",
      answers: [
        { id: "a", text: "Breaking an application into small, independent services" },
        { id: "b", text: "Using very small servers" },
        { id: "c", text: "Writing minimal code" },
        { id: "d", text: "Using only JavaScript" }
      ],
      correctAnswer: "a",
      topic: "Architecture",
      difficulty: "advanced",
      aiExplanation: "Assessing modern architecture patterns understanding."
    },
    {
      id: 9,
      question: "What is the purpose of Git?",
      answers: [
        { id: "a", text: "Version control and source code management" },
        { id: "b", text: "Code execution" },
        { id: "c", text: "Database management" },
        { id: "d", text: "UI design" }
      ],
      correctAnswer: "a",
      topic: "Version Control",
      difficulty: "basic",
      aiExplanation: "Verifying fundamental development workflow knowledge."
    },
    {
      id: 10,
      question: "What is server-side rendering (SSR)?",
      answers: [
        { id: "a", text: "Rendering web pages on the server before sending to client" },
        { id: "b", text: "Styling components on the server" },
        { id: "c", text: "Running tests on the server" },
        { id: "d", text: "Hosting files on the server" }
      ],
      correctAnswer: "a",
      topic: "Performance",
      difficulty: "intermediate",
      aiExplanation: "Your analysis indicated performance optimization knowledge needed."
    }
  ],
  mobile: [
    {
      id: 1,
      question: "What is the primary advantage of React Native?",
      answers: [
        { id: "a", text: "Write once, run on iOS and Android" },
        { id: "b", text: "Faster than native apps" },
        { id: "c", text: "No need for JavaScript" },
        { id: "d", text: "Automatic app store deployment" }
      ],
      correctAnswer: "a",
      topic: "React Native",
      difficulty: "basic",
      aiExplanation: "Testing fundamental React Native understanding."
    },
    {
      id: 2,
      question: "What is the purpose of AsyncStorage in React Native?",
      answers: [
        { id: "a", text: "Persistent local data storage" },
        { id: "b", text: "Managing async functions" },
        { id: "c", text: "Handling API calls" },
        { id: "d", text: "Styling components" }
      ],
      correctAnswer: "a",
      topic: "Data Storage",
      difficulty: "intermediate",
      aiExplanation: "Your profile indicates need for mobile storage knowledge."
    },
    {
      id: 3,
      question: "What is an APK file?",
      answers: [
        { id: "a", text: "Android Package Kit for Android apps" },
        { id: "b", text: "iOS app package" },
        { id: "c", text: "A database file" },
        { id: "d", text: "A configuration file" }
      ],
      correctAnswer: "a",
      topic: "Android Development",
      difficulty: "basic",
      aiExplanation: "Verifying basic mobile deployment knowledge."
    },
    {
      id: 4,
      question: "What is the purpose of React Navigation?",
      answers: [
        { id: "a", text: "Managing screen navigation in React Native apps" },
        { id: "b", text: "Web browser navigation" },
        { id: "c", text: "GPS navigation" },
        { id: "d", text: "File navigation" }
      ],
      correctAnswer: "a",
      topic: "Navigation",
      difficulty: "intermediate",
      aiExplanation: "Testing mobile navigation patterns knowledge."
    },
    {
      id: 5,
      question: "What is Flutter?",
      answers: [
        { id: "a", text: "A cross-platform mobile framework using Dart" },
        { id: "b", text: "A JavaScript library" },
        { id: "c", text: "An iOS-only framework" },
        { id: "d", text: "A database system" }
      ],
      correctAnswer: "a",
      topic: "Flutter",
      difficulty: "basic",
      aiExplanation: "Assessing knowledge of alternative mobile frameworks."
    },
    {
      id: 6,
      question: "What are push notifications?",
      answers: [
        { id: "a", text: "Messages sent from server to device when app is closed" },
        { id: "b", text: "Local app alerts only" },
        { id: "c", text: "In-app messages" },
        { id: "d", text: "Email notifications" }
      ],
      correctAnswer: "a",
      topic: "Notifications",
      difficulty: "intermediate",
      aiExplanation: "Your analysis showed mobile features knowledge needed."
    },
    {
      id: 7,
      question: "What is the purpose of Expo in React Native?",
      answers: [
        { id: "a", text: "A framework for easier React Native development" },
        { id: "b", text: "A testing library" },
        { id: "c", text: "A state management tool" },
        { id: "d", text: "A database" }
      ],
      correctAnswer: "a",
      topic: "Development Tools",
      difficulty: "intermediate",
      aiExplanation: "Testing mobile development tooling knowledge."
    },
    {
      id: 8,
      question: "What is Swift?",
      answers: [
        { id: "a", text: "Apple's programming language for iOS/macOS" },
        { id: "b", text: "A JavaScript framework" },
        { id: "c", text: "An Android language" },
        { id: "d", text: "A database" }
      ],
      correctAnswer: "a",
      topic: "iOS Development",
      difficulty: "basic",
      aiExplanation: "Verifying native iOS development awareness."
    },
    {
      id: 9,
      question: "What is responsive design in mobile development?",
      answers: [
        { id: "a", text: "Adapting UI to different screen sizes" },
        { id: "b", text: "Fast app performance" },
        { id: "c", text: "Quick API responses" },
        { id: "d", text: "Automated testing" }
      ],
      correctAnswer: "a",
      topic: "UI/UX",
      difficulty: "intermediate",
      aiExplanation: "Testing mobile UI design principles."
    },
    {
      id: 10,
      question: "What is the purpose of Firebase in mobile apps?",
      answers: [
        { id: "a", text: "Backend services like database, auth, and hosting" },
        { id: "b", text: "Frontend styling" },
        { id: "c", text: "Code compilation" },
        { id: "d", text: "App store submission" }
      ],
      correctAnswer: "a",
      topic: "Backend Services",
      difficulty: "intermediate",
      aiExplanation: "Your profile suggests mobile backend integration needed."
    }
  ],
  datascience: [
    {
      id: 1,
      question: "What is the difference between supervised and unsupervised learning?",
      answers: [
        { id: "a", text: "Supervised uses labeled data, unsupervised uses unlabeled data" },
        { id: "b", text: "They are the same" },
        { id: "c", text: "Supervised is faster" },
        { id: "d", text: "Unsupervised requires more code" }
      ],
      correctAnswer: "a",
      topic: "Machine Learning",
      difficulty: "intermediate",
      aiExplanation: "Based on your data science track, testing ML fundamentals."
    },
    {
      id: 2,
      question: "What is a DataFrame in Pandas?",
      answers: [
        { id: "a", text: "A 2D labeled data structure like a table" },
        { id: "b", text: "A type of neural network" },
        { id: "c", text: "A visualization tool" },
        { id: "d", text: "A database" }
      ],
      correctAnswer: "a",
      topic: "Data Analysis",
      difficulty: "basic",
      aiExplanation: "Verifying fundamental Pandas knowledge."
    },
    {
      id: 3,
      question: "What is overfitting in machine learning?",
      answers: [
        { id: "a", text: "When a model performs well on training but poorly on new data" },
        { id: "b", text: "When a model is too simple" },
        { id: "c", text: "When data is too clean" },
        { id: "d", text: "When a model trains too fast" }
      ],
      correctAnswer: "a",
      topic: "Model Evaluation",
      difficulty: "intermediate",
      aiExplanation: "Your analysis showed need for ML evaluation concepts."
    },
    {
      id: 4,
      question: "What library is commonly used for data visualization in Python?",
      answers: [
        { id: "a", text: "Matplotlib" },
        { id: "b", text: "NumPy" },
        { id: "c", text: "Flask" },
        { id: "d", text: "Django" }
      ],
      correctAnswer: "a",
      topic: "Data Visualization",
      difficulty: "basic",
      aiExplanation: "Testing data visualization tools knowledge."
    },
    {
      id: 5,
      question: "What is NumPy primarily used for?",
      answers: [
        { id: "a", text: "Numerical computing with arrays" },
        { id: "b", text: "Web development" },
        { id: "c", text: "Mobile apps" },
        { id: "d", text: "Database management" }
      ],
      correctAnswer: "a",
      topic: "Scientific Computing",
      difficulty: "basic",
      aiExplanation: "Verifying Python scientific computing fundamentals."
    },
    {
      id: 6,
      question: "What is feature engineering?",
      answers: [
        { id: "a", text: "Creating new features from existing data to improve models" },
        { id: "b", text: "Building software features" },
        { id: "c", text: "Deleting unnecessary data" },
        { id: "d", text: "Testing model accuracy" }
      ],
      correctAnswer: "a",
      topic: "Feature Engineering",
      difficulty: "intermediate",
      aiExplanation: "Your profile suggests advanced data preparation needed."
    },
    {
      id: 7,
      question: "What is a neural network?",
      answers: [
        { id: "a", text: "A computing system inspired by biological neural networks" },
        { id: "b", text: "A database system" },
        { id: "c", text: "A web framework" },
        { id: "d", text: "A testing tool" }
      ],
      correctAnswer: "a",
      topic: "Deep Learning",
      difficulty: "intermediate",
      aiExplanation: "Testing deep learning fundamentals."
    },
    {
      id: 8,
      question: "What is cross-validation?",
      answers: [
        { id: "a", text: "A technique to assess model performance on different data subsets" },
        { id: "b", text: "Checking data for errors" },
        { id: "c", text: "Comparing two models" },
        { id: "d", text: "Validating user input" }
      ],
      correctAnswer: "a",
      topic: "Model Validation",
      difficulty: "intermediate",
      aiExplanation: "Your analysis indicated model evaluation knowledge needed."
    },
    {
      id: 9,
      question: "What is TensorFlow?",
      answers: [
        { id: "a", text: "An open-source machine learning framework" },
        { id: "b", text: "A data visualization tool" },
        { id: "c", text: "A database system" },
        { id: "d", text: "A web framework" }
      ],
      correctAnswer: "a",
      topic: "Deep Learning Frameworks",
      difficulty: "intermediate",
      aiExplanation: "Testing ML framework knowledge."
    },
    {
      id: 10,
      question: "What is the purpose of normalization in data preprocessing?",
      answers: [
        { id: "a", text: "To scale features to a similar range" },
        { id: "b", text: "To remove outliers" },
        { id: "c", text: "To delete missing values" },
        { id: "d", text: "To sort the data" }
      ],
      correctAnswer: "a",
      topic: "Data Preprocessing",
      difficulty: "intermediate",
      aiExplanation: "Your profile suggests data preprocessing techniques needed."
    }
  ]
};

// Helper function to get AI quiz questions by track
export const getAIQuizByTrack = (track) => {
  const trackKey = normalizeTrackKey(track);
  return aiQuizData[trackKey] || aiQuizData.frontend;
};

// Helper function to analyze quiz results
// TODO: In the future, this will use actual AI to provide personalized insights
export const analyzeAIQuizResults = (questions, answers) => {
  let correct = 0;
  let wrong = 0;
  let needsLearning = 0;
  const topicScores = {};

  questions.forEach((question) => {
    const userAnswer = answers[question.id];
    const isCorrect = userAnswer === question.correctAnswer;
    
    if (isCorrect) {
      correct++;
    } else if (userAnswer) {
      wrong++;
    } else {
      needsLearning++;
    }

    // Track topic performance
    if (!topicScores[question.topic]) {
      topicScores[question.topic] = { correct: 0, total: 0 };
    }
    topicScores[question.topic].total++;
    if (isCorrect) {
      topicScores[question.topic].correct++;
    }
  });

  // Determine strengths and weaknesses
  const strengths = [];
  const weaknesses = [];

  Object.entries(topicScores).forEach(([topic, scores]) => {
    const percentage = (scores.correct / scores.total) * 100;
    if (percentage >= 70) {
      strengths.push({ topic, score: Math.round(percentage) });
    } else if (percentage < 50) {
      weaknesses.push({ topic, score: Math.round(percentage) });
    }
  });

  return {
    score: Math.round((correct / questions.length) * 100),
    total: questions.length,
    correct,
    wrong,
    needsLearning,
    strengths,
    weaknesses,
    topicScores
  };
};
